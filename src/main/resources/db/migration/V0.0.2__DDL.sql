--
-- Category table
--
CREATE TABLE CATEGORY (
  CATEGORY_ID 		INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  NAME      		VARCHAR(255) NOT NULL,
);

ALTER TABLE PET ADD COLUMN CATEGORY_ID INTEGER;
ALTER TABLE PET ADD CONSTRAINT fk_pet_category FOREIGN KEY (CATEGORY_ID) REFERENCES CATEGORY(CATEGORY_ID);

INSERT INTO CATEGORY (NAME) VALUES ('category 1');
INSERT INTO CATEGORY (NAME) VALUES ('category 2');
INSERT INTO CATEGORY (NAME) VALUES ('category 3');

UPDATE PET SET CATEGORY_ID = 1 WHERE PET_ID = 1;
UPDATE PET SET CATEGORY_ID = 2 WHERE PET_ID = 2;
UPDATE PET SET CATEGORY_ID = 3 WHERE PET_ID = 3;



-- TAG table
--

CREATE TABLE TAG (
  TAG_ID 		INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  NAME      	VARCHAR(255) NOT NULL,
  PET_ID        INTEGER REFERENCES PET(PET_ID)
);


CREATE TABLE PHOTOS (
  PHOTO_ID 		INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  NAME      	VARCHAR(255) NOT NULL,
  PET_ID        INTEGER REFERENCES PET(PET_ID)
);


--
-- Category User
--

CREATE TABLE USER (
  USER_ID 			INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  USERNAME      	VARCHAR(255) NOT NULL,
  FIRST_NAME      	VARCHAR(255) NOT NULL,
  LAST_NAME      	VARCHAR(255) NOT NULL,
  EMAIL      		VARCHAR(255) NOT NULL,
  PASSWORD      	VARCHAR(255) NOT NULL,
  PHONE      		VARCHAR(255) NOT NULL,
  USER_STATUS      	INTEGER NOT NULL,
);


--
-- Category Order
--

CREATE TABLE ORDERING (
  ORDER_ID 		INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  PET_ID        INTEGER REFERENCES PET(PET_ID),
  SHIP_DATE     DATETIME DEFAULT NULL,
  QUANTITY      INTEGER NOT NULL,
  STATUS        VARCHAR(10)  NOT NULL,
  COMPLETE      BOOLEAN DEFAULT FALSE
);



